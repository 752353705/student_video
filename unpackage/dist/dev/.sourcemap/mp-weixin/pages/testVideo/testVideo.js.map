{"version":3,"sources":["uni-app:///main.js","webpack:///D:/myself/work/student_video/pages/testVideo/testVideo.vue?d2cb","webpack:///D:/myself/work/student_video/pages/testVideo/testVideo.vue?c693","webpack:///D:/myself/work/student_video/pages/testVideo/testVideo.vue?38a1","webpack:///D:/myself/work/student_video/pages/testVideo/testVideo.vue?ef07","uni-app:///pages/testVideo/testVideo.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,wG;AACAA,UAAU,CAACC,kBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AAC6K;AAC7K,gBAAgB,oLAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwpB,CAAgB,spBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACmD5qB;AACA,mD;AACA;AACA,MADA,kBACA;AACA;AACA,kBADA;AAEA;AACA;AACA,qBADA;AAEA,qBAFA;AAGA,uBAHA,EADA;;AAMA;AACA,sBADA;AAEA,qBAFA,EANA,CAFA;;;AAaA,oBAbA;AAcA,wBAdA;;AAgBA,GAlBA;AAmBA;AACA;AACA,kBAFA,0BAEA,IAFA,EAEA;AACA;AACA;AACA,qBADA;AAEA,8BAFA;AAGA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SAVA;;AAYA,KAhBA;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,gCAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAjBA;;AAmBA,KA7CA;;AA+CA;AACA;AACA;AACA;AACA,uDADA;AAEA,oDAFA;AAGA,uBAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAjBA;;AAmBA,KArEA;;AAuEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAhFA;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,2BAFA;;AAIA,KA3FA;;AA6FA;AACA,aA9FA,qBA8FA,KA9FA,EA8FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA,2DADA;;AAGA;AACA,KA7GA,EAnBA,E","file":"pages/testVideo/testVideo.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/testVideo/testVideo.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./testVideo.vue?vue&type=template&id=633af78a&\"\nvar renderjs\nimport script from \"./testVideo.vue?vue&type=script&lang=js&\"\nexport * from \"./testVideo.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"myself/work/student_video/pages/testVideo/testVideo.vue\"\nexport default component.exports","export * from \"-!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testVideo.vue?vue&type=template&id=633af78a&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testVideo.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../uniapp/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./testVideo.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"reg\">\r\n\t\t<view class=\"imgItems\">\r\n\t\t<view class=\"grace-file-list\" style=\"padding: 0;margin-bottom: 50upx\">\r\n\t\t<view class=\"items\" v-for=\"(item, index) in fastImgLists\" :key=\"index\">\r\n\t\t\t\r\n\t\t\t<!-- v-if=\"item.type == 'video'\" -->\r\n\t\t\t<view\r\n\t\t\tclass=\"video-bg\"\r\n\t\t\t\r\n\t\t\tstyle=\"position:relative;background-color: rgb(98,98,98);display: flex;justify-content: center;align-items: center;\"\r\n\t\t\t>\r\n\t\t\t<!-- v-show=\"fastImgLists[index].needload != 'true'\" -->\r\n\t\t\t\t<image\r\n\t\t\t\t\t\r\n\t\t\t\t\t:id=\"item.id\"\r\n\t\t\t\t\t:src=\"item.filePath\"\r\n\t\t\t\t\tmode=\"aspectFit\"\r\n\t\t\t\t\t:data-imgurl=\"item.filePath\"\r\n\t\t\t\t\t@tap=\"showVideo(index)\"\r\n\t\t\t\t\tstyle=\"width: 48upx;height: 48upx;\"\r\n\t\t\t\t>\r\n\t\t\t\t</image>\r\n\t\t\t</view>\r\n\t\t\t<!-- v-else  -->\r\n\t\t\t<image \r\n\t\t\t\t:src=\"item.filePath\" \r\n\t\t\t\tmode=\"aspectFill\" \r\n\t\t\t\t:data-imgurl=\"item.filePath\" @tap=\"showImgs\"\r\n\t\t\t>\r\n\t\t\t</image>\r\n\t\t\t\r\n\t\t\t<image\r\n\t\t\tsrc=\"../../static/cpt.png\"\r\n\t\t\tclass=\"remove\"\r\n\t\t\t@tap=\"removeImg\"\r\n\t\t\t:id=\"'grace-items-img-' + index\"\r\n\t\t\tstyle=\"width: 38upx;height: 38upx;\"\r\n\t\t\t></image>\r\n\t\t\r\n\t\t</view>\r\n\t\t<!-- v-if=\"canAdd\" -->\r\n\t\t<view class=\"add-btn addImg\"  @tap=\"actionSheetTap('fast')\" >\r\n\t\t</view>\r\n\t\t<image style=\"width: 40rpx;height:40rpx;\" src=\"../../static/close.png\" :data-imgurl=\"imgSrc\" mode=\"\"></image>\r\n\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar maxNum = 6\r\n\tvar sourceType = [['camera'], ['camera', 'album']]\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn{\r\n\t\t\t\tcanAdd: true,\r\n\t\t\t\tcameraList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\tvalue: 'back',\r\n\t\t\t\t\tname: '后置摄像头',\r\n\t\t\t\t\tchecked: 'true'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\tvalue: 'front',\r\n\t\t\t\t\tname: '前置摄像头'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tcameraIndex: 0,\r\n\t\t\t\tsourceTypeIndex: 0\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t//选择图片还是视频\r\n\t\t\tactionSheetTap(type) {\r\n\t\t\t\tconsole.log(type);\r\n\t\t\t\tuni.showActionSheet({\r\n\t\t\t\t\ttitle: '选择类型',\r\n\t\t\t\t\titemList: ['视频', '图片'],\r\n\t\t\t\t\tsuccess: e => {\r\n\t\t\t\t\t\tconsole.log(e.tapIndex);\r\n\t\t\t\t\t\tif (e.tapIndex == 0) {\r\n\t\t\t\t\t\t\tthis.chooseVideo(type);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.addImg(type);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//选中图片\r\n\t\t\taddImg: function(type) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tvar num = maxNum - _this.fastImgLists.length;\r\n\t\t\t\tconsole.log(_this.fastImgLists.length);\r\n\t\t\t\tif (num < 1) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: num,\r\n\t\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tfor (let i = 0; i < res.tempFilePaths.length; i++) {\r\n\t\t\t\t\t\t\tlet imgitem = {};\r\n\t\t\t\t\t\t\timgitem.type = 'img';\r\n\t\t\t\t\t\t\timgitem.id = res.tempFilePaths[i];\r\n\t\t\t\t\t\t\timgitem.filePath = res.tempFilePaths[i];\r\n\t\t\t\t\t\t\timgitem.needload = false;\r\n\t\t\t\t\t\t\t_this.fastImgLists.push(imgitem);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//当添加的图片数量大于六时（v-for的list大于6），可添加图片的标志隐藏\r\n\t\t\t\t\t\tif (_this.fastImgLists.length >= maxNum) {\r\n\t\t\t\t\t\t\t_this.canAdd = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//选中视频\r\n\t\t\tchooseVideo: function(type) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tuni.chooseVideo({\r\n\t\t\t\t\tcamera: this.cameraList[this.cameraIndex].value,\r\n\t\t\t\t\tsourceType: sourceType[this.sourceTypeIndex],\r\n\t\t\t\t\tmaxDuration: 10,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res.tempFilePath);\r\n\t\t\t\t\t\tlet imgitem = {};\r\n\t\t\t\t\t\timgitem.type = 'video';\r\n\t\t\t\t\t\timgitem.id = res.tempFilePath;\r\n\t\t\t\t\t\timgitem.filePath = '../../static/video.png';\r\n\t\t\t\t\t\timgitem.needload = false;\r\n\t\t\t\t\t\t_this.fastImgLists.push(imgitem);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//v-for的list数量大于六时，添加标志隐藏\r\n\t\t\t\t\t\tif (_this.fastImgLists.length >= maxNum) {\r\n\t\t\t\t\t\t\t_this.canAdd = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//移除\r\n\t\t\tremoveImg: function(e) {\r\n\t\t\t\tlet _this = this;\r\n\t\t\t\tconsole.log('removeImg');\r\n\t\t\t\tvar index = e.currentTarget.id.replace('grace-items-img-', '');\r\n\t\t\t\t_this.fastImgLists.splice(index, 1);\r\n\t\t\t\tif (_this.fastImgLists.length < maxNum) {\r\n\t\t\t\t\t_this.canAdd = true;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//点击预览图片\r\n\t\t\tshowImgs: function(e) {\r\n\t\t\t\tvar currentImg = e.currentTarget.dataset.imgurl;\r\n\t\t\t\tlet urls = [];\r\n\t\t\t\turls.push(currentImg);\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: urls,\r\n\t\t\t\t\tcurrent: currentImg\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//点击播放视频\r\n\t\t\tshowVideo(index) {\r\n\t\t\t\tlet file = this.fastImgLists[index].id;\r\n\t\t\t\tconsole.log(file);\r\n\t\t\t\tif (file.indexOf('http:') > -1) {\r\n\t\t\t\t\t//未下载到本地\r\n\t\t\t\t\tthis.fastImgLists[index][subindex].needload = 'true';\r\n\t\t\t\t\tthis.fastImgLists[index][subindex].filePath = '';\r\n\t\t\t\t\tthis.downVideoFile(index, subindex, file);\r\n\t\t\t\t} else {\r\n\t\t\t\t//已下载到本地，跳播放页\r\n\t\t\t\t\tconsole.log(file);\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: `../preview/previewVideo?file=${file}`\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n\r\n</style>\r\n"],"sourceRoot":""}