<wxs module="comment">
// 控制 二级评论 的时间格式
function sec_cmt(msg){

	var sec_cmt = msg.slice(0,3)
	return sec_cmt
}

module.exports = {
	sec_cmt: sec_cmt,
}
</wxs>
<wxs module="time">
function changetime(time){
	if(!time){
		// time = new Date()
		var date = getDate(getDate().getTime())
		// 月
		var months = date.getMonth() + 1
		// 日
		var day = date.getDate()
		// 小时
		var hour = date.getHours()
		// 分钟
		var minutes = date.getMinutes()

		return months + '-' + day + ' ' + hour + ':' + minutes
	}
	//那一天
	time1 = time.split(' ')[0].split('-')[1]
	time2 = time.split(' ')[0].split('-')[2]

	//具体小时时间
	//因为后端传递 数据时 中间多了个空格
	time3 = time.split(' ')[1].split(':')[0]
	time4 = time.split(' ')[1].split(':')[1]
	// // 当用户 是在 当天发边的评论并且在当天显示
	// console.log('返回聊天记录时间',time1 + '-' + time2)

	return time1 + '-' + time2 + ' ' +  time3 + ":" + time4
	// return time
}

module.exports = {
	changetime: changetime,
}
</wxs>
<view class="data-v-16bb2213"><scroll-view style="height:320px;overflow:hidden;" enable-flex="true" scroll-y="true" lower-threshold="80" data-event-opts="{{[['scrolltolower',[['scrolltolower',['$event']]]]]}}" bindscrolltolower="__e" class="data-v-16bb2213"><block wx:for="{{msgList}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="comment data-v-16bb2213"><view class="left data-v-16bb2213"><image src="{{item.avatarUrl}}" mode="aspectFill" class="data-v-16bb2213"></image></view><view class="right data-v-16bb2213"><view class="top data-v-16bb2213"><view class="name data-v-16bb2213">{{item.userName||'用户名'}}</view><view data-event-opts="{{[['tap',[['seeActive',['$0',index],[[['msgList','id',item.id,'id']]]]]]]}}" class="{{['like data-v-16bb2213',(item.liked)?'highlight':'']}}" bindtap="__e"><view class="num data-v-16bb2213">{{item.praseCount||''}}</view><block wx:if="{{!item.liked}}"><u-icon vue-id="{{'7a859d6e-1-'+index}}" name="thumb-up" size="{{30}}" color="#9a9a9a" class="data-v-16bb2213" bind:__l="__l"></u-icon></block><block wx:if="{{item.liked}}"><u-icon vue-id="{{'7a859d6e-2-'+index}}" name="thumb-up-fill" size="{{30}}" class="data-v-16bb2213" bind:__l="__l"></u-icon></block></view></view><view data-event-opts="{{[['tap',[['reply',[index,'$0'],['index2']]]]]}}" class="content data-v-16bb2213" bindtap="__e">{{''+(item.content||'用户说的话')+''}}</view><block class="data-v-16bb2213"><block wx:if="{{item.replyList.length!==0}}"><view class="reply-box data-v-16bb2213"><block wx:for="{{comment.sec_cmt(item.replyList)}}" wx:for-item="item2" wx:for-index="index2" wx:key="id"><view class="item data-v-16bb2213"><view class="username data-v-16bb2213">{{item2.userName||'用户名'}}</view><view class="text data-v-16bb2213">{{item2.content||'用户说的话'}}</view></view></block><block wx:if="{{item.replyList!=undefined}}"><view data-event-opts="{{[['tap',[['toAllReply',[index]]]]]}}" class="all-reply data-v-16bb2213" bindtap="__e">{{'共 '+item.replyList.length+' 条回复'}}<u-icon class="more data-v-16bb2213" vue-id="{{'7a859d6e-3-'+index}}" name="arrow-right" size="{{26}}" bind:__l="__l"></u-icon></view></block></view></block></block><view class="bottom data-v-16bb2213">{{''+(time.changetime(item.createTime)||item.createTime)+''}}<view data-event-opts="{{[['tap',[['reply',[index,'$0'],['index2']]]]]}}" class="reply data-v-16bb2213" bindtap="__e">回复</view></view></view></view></block></scroll-view></view>