<wxs module="time">
// 控制 二级评论 的时间格式 
function changetime(time){
	if(!time){
		// time = new Date()
		var date = getDate(getDate().getTime())
		// 月
		var months = date.getMonth() + 1
		// 日
		var day = date.getDate()
		// 小时
		var hour = date.getHours()
		// 分钟
		var minutes = date.getMinutes()
		
		return months + '-' + day + ' ' + hour + ':' + minutes
	}
	//那一天
	time1 = time.split(' ')[0].split('-')[1] 
	time2 = time.split(' ')[0].split('-')[2] 

	//具体小时时间  
	//因为后端传递 数据时 中间多了个空格
	time3 = time.split(' ')[1].split(':')[0]
	time4 = time.split(' ')[1].split(':')[1]
	// // 当用户 是在 当天发边的评论并且在当天显示
	// console.log('返回聊天记录时间',time1 + '-' + time2)
	
	return time1 + '-' + time2 + ' ' +  time3 + ":" + time4
	// return time
}

module.exports = {
	changetime: changetime,
}
</wxs>
<view><scroll-view style="height:320px;overflow:hidden;" enable-flex="true" scroll-y="true" lower-threshold="80" data-event-opts="{{[['scrolltolower',[['scrolltolower',['$event']]]]]}}" bindscrolltolower="__e"><block wx:for="{{msgList}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="user_cmt"><view data-event-opts="{{[['tap',[['goAuthor',['$0'],[[['msgList','id',item.id,'userId']]]]]]]}}" class="user_img" bindtap="__e"><image src="{{item.avatarUrl}}" mode></image></view><view class="content"><view data-event-opts="{{[['tap',[['goAuthor',['$0'],[[['msgList','id',item.id,'userId']]]]]]]}}" class="user_head" bindtap="__e">{{''+(item.userName||'用户名')+''}}</view><view class="user_body">{{''+(item.content||'用户说的话')+''}}</view><view class="user_footer"><view class="left"><view class="time">{{''+(time.changetime(item.createTime)||item.createTime)+''}}</view></view><view class="cmt_right" id="{{'right'+index}}" data-event-opts="{{[['tap',[['seeActive',['$0',index],[[['msgList','id',item.id,'id']]]]]]]}}" bindtap="__e"><block wx:if="{{!item.liked}}"><u-icon vue-id="{{'7a859d6e-1-'+index}}" color="#93979a" size="40" name="thumb-up" bind:__l="__l"></u-icon></block><block wx:else><u-icon vue-id="{{'7a859d6e-2-'+index}}" size="40" name="thumb-up-fill" color="#ff6347" bind:__l="__l"></u-icon></block><text style="{{'margin-left:10rpx;'+(item.liked?'color:#ff6347;':'color:#93979a;')}}">{{''+(item.praseCount||'')+''}}</text></view></view><block wx:if="{{item.replyList.length!==0}}"><view class="two"><block wx:for="{{item.replyList}}" wx:for-item="item2" wx:for-index="index2" wx:key="id"><view class="two_cmt"><view data-event-opts="{{[['tap',[['goAuthor',['$0'],[[['msgList','id',item.id],['replyList','id',item2.id,'userId']]]]]]]}}" class="user_img" bindtap="__e"><image src="{{item2.avatarUrl}}" mode></image></view><view class="content two_content"><view data-event-opts="{{[['tap',[['goAuthor',['$0'],[[['msgList','id',item.id],['replyList','id',item2.id,'userId']]]]]]]}}" class="user_head" bindtap="__e">{{''+(item2.userName||'用户名')+''}}</view><block wx:if="{{true}}"><view data-event-opts="{{[['tap',[['reply',[index,index2]]]]]}}" class="user_body" bindtap="__e">{{''+(item2.content||'用户说的话')+''}}</view></block><block wx:else><view data-event-opts="{{[['tap',[['reply',[index,index2]]]]]}}" class="user_body" bindtap="__e">{{''+(threereplayname+item2.content||'用户说的话')+''}}</view></block><view class="user_footer"><view class="left"><view class="time">{{''+(time.changetime(item2.createTime)||item2.createTime)+''}}</view></view><view data-event-opts="{{[['tap',[['replaySec',[index,index2]]]]]}}" class="cmt_right" bindtap="__e"><block wx:if="{{!item2.liked}}"><u-icon vue-id="{{'7a859d6e-3-'+index+'-'+index2}}" color="#93979a" size="40" name="thumb-up" bind:__l="__l"></u-icon></block><block wx:else><u-icon vue-id="{{'7a859d6e-4-'+index+'-'+index2}}" size="40" name="thumb-up-fill" color="#ff6347" bind:__l="__l"></u-icon></block><text style="{{'margin-left:10rpx;'+(item2.liked?'color:#ff6347;':'color:#93979a;')}}">{{''+(item2.praseCount||'')+''}}</text></view></view></view></view></block></view></block></view></view></block></scroll-view></view>