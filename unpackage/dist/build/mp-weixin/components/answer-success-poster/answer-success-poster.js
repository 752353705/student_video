(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/answer-success-poster/answer-success-poster"],{2056:function(t,n,e){"use strict";var o=e("e2ca"),c=e.n(o);c.a},"428c":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=c(e("4795"));function c(t){return t&&t.__esModule?t:{default:t}}function a(t,n,e,o,c,a,s){try{var u=t[a](s),i=u.value}catch(r){return void e(r)}u.done?n(i):Promise.resolve(i).then(o,c)}function s(t){return function(){var n=this,e=arguments;return new Promise((function(o,c){var s=t.apply(n,e);function u(t){a(s,o,c,u,i,"next",t)}function i(t){a(s,o,c,u,i,"throw",t)}u(void 0)}))}}var u={props:{bgImg:{type:String,default:""}},data:function(){return{canvasW:0,canvasH:0,ctx:null,qrcode:"",uImg:""}},methods:{showCanvas:function(t){this.uImg=t,this.__init()},__init:function(){var n=this;return s(o.default.mark((function e(){var c,a,s,u,i,r;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.showLoading({title:"绘制中...",mask:!0}),n.ctx=t.createCanvasContext("my-canvas",n),n.ctx.setFillStyle("rgba(255, 255, 255, 0)"),n.canvasW=t.upx2px(714),n.canvasH=t.upx2px(988),n.ctx.fillRect(0,0,n.canvasW,n.canvasH),n.drawRoundRect(n.ctx,0,0,n.canvasW,n.canvasH,t.upx2px(18),"#FFFFFF"),e.next=9,n.getImageInfo(n.bgImg);case 9:return c=e.sent,a=t.upx2px(714),s=t.upx2px(988),n.drawRoundImg(n.ctx,c.path,(n.canvasW-a)/2,(n.canvasW-a)/2,a,s,t.upx2px(16)),e.next=15,n.getImageInfo(n.uImg);case 15:u=e.sent,i=t.upx2px(170),r=t.upx2px(170),n.drawRoundImg(n.ctx,u.path,t.upx2px(280),t.upx2px(100),i,r,t.upx2px(90)),setTimeout((function(){n.ctx.draw(!0,(function(){t.hideLoading(),n.$emit("close")}))}),500);case 20:case"end":return e.stop()}}),e)})))()},drawRoundImg:function(t,n,e,o,c,a,s){t.beginPath(),t.save(),t.arc(e+s,o+s,s,Math.PI,1.5*Math.PI),t.arc(e+c-s,o+s,s,1.5*Math.PI,2*Math.PI),t.arc(e+c-s,o+a-s,s,0,.5*Math.PI),t.arc(e+s,o+a-s,s,.5*Math.PI,Math.PI),t.stroke(),t.clip(),t.drawImage(n,e,o,c,a),t.restore(),t.closePath()},drawRoundRect:function(t,n,e,o,c,a,s){t.save(),t.beginPath(),t.setFillStyle(s),t.setStrokeStyle(s),t.setLineJoin("round"),t.setLineWidth(a),t.strokeRect(n+a/2,e+a/2,o-a,c-a),t.fillRect(n+a,e+a,o-2*a,c-2*a),t.stroke(),t.closePath()},getImageInfo:function(n){return new Promise((function(e,o){t.getImageInfo({src:n,success:function(t){e(t)},fail:function(t){o(t),console.log("获取图片失败",t)}})}))},saveImage:function(){var n=this;t.getSetting({success:function(e){e.authSetting["scope.writePhotosAlbum"]?(console.log("已授权保存到相册"),n.saveImageOpention()):(console.log("未授权保存到相册"),t.authorize({scope:"scope.writePhotosAlbum",success:function(t){console.log("授权成功 res",t),n.saveImageOpention()},fail:function(){t.showModal({content:"检测到您未打开授权保存图片到相册的权限,是否去设置打开",confirmText:"确认",cancelText:"取消",success:function(n){n.confirm&&t.openSetting({success:function(t){console.log("重新进行授权")},fail:function(t){console.log("授权失败")}})}})}}))}})},saveImageOpention:function(){t.canvasToTempFilePath({canvasId:"my-canvas",quality:1,complete:function(n){t.saveImageToPhotosAlbum({filePath:n.tempFilePath,success:function(n){console.log("保存到相册成功 res",n),t.showToast({title:"已保存到相册",icon:"success",duration:2e3}),t.navigateTo({url:"/pages/publish/publishNotice"})},fail:function(n){console.log("调用保存到相册接口失败 error",n),t.showToast({title:"保存到相册失败",icon:"none",duration:2e3})}})}},this)}}};n.default=u}).call(this,e("543d")["default"])},beb4:function(t,n,e){"use strict";e.r(n);var o=e("cdc6"),c=e("ffd3");for(var a in c)"default"!==a&&function(t){e.d(n,t,(function(){return c[t]}))}(a);e("2056");var s,u=e("f0c5"),i=Object(u["a"])(c["default"],o["b"],o["c"],!1,null,"3d886b62",null,!1,o["a"],s);n["default"]=i.exports},cdc6:function(t,n,e){"use strict";var o,c=function(){var t=this,n=t.$createElement;t._self._c},a=[];e.d(n,"b",(function(){return c})),e.d(n,"c",(function(){return a})),e.d(n,"a",(function(){return o}))},e2ca:function(t,n,e){},ffd3:function(t,n,e){"use strict";e.r(n);var o=e("428c"),c=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,(function(){return o[t]}))}(a);n["default"]=c.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/answer-success-poster/answer-success-poster-create-component',
    {
        'components/answer-success-poster/answer-success-poster-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("beb4"))
        })
    },
    [['components/answer-success-poster/answer-success-poster-create-component']]
]);
