(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order/order"],{"05aa":function(e,t,r){"use strict";r.r(t);var o=r("5744"),n=r.n(o);for(var a in o)"default"!==a&&function(e){r.d(t,e,(function(){return o[e]}))}(a);t["default"]=n.a},"4fa1":function(e,t,r){"use strict";r.r(t);var o=r("8738"),n=r("05aa");for(var a in n)"default"!==a&&function(e){r.d(t,e,(function(){return n[e]}))}(a);r("a1a8");var s,i=r("f0c5"),c=Object(i["a"])(n["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=c.exports},5744:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r("20e5"),n={components:{},data:function(){return{orderList:[],showType:0,page:1,size:10,totalPages:1}},onLoad:function(e){try{var t=wx.getStorageSync("tab");this.showType=t}catch(r){}},onShow:function(){this.orderList=[],this.page=1,this.size=10,this.totalPages=1,this.getOrderList()},methods:{getOrderList:function(){var e=this;this.api._get("order/list",{showType:e.showType,page:e.page,size:e.size},(function(t){0===t.errno&&(console.log(t.data),e.orderList=e.orderList.concat(t.data.data),e.totalPages=t.data.totalPages)}))},onReachBottom:function(){if(!(this.totalPages>this.page))return wx.showToast({title:"没有更多订单了",icon:"none",duration:2e3}),!1;this.page=this.data.page+1,this.getOrderList()},switchTab:function(e){var t=e.currentTarget.dataset.index;this.orderList=[],this.showType=t,this.page=1,this.size=10,this.totalPages=1,this.getOrderList()},payOrder:function(e){var t=e.currentTarget.dataset.index;this.api._get("order/prepay",{orderId:t},(function(e){if(0===e.errno){var t=e.data;console.log("支付过程开始"),wx.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.packageValue,signType:t.signType,paySign:t.paySign,success:function(e){console.log("支付过程成功"),o.redirect("/pages/ucenter/order/order")},fail:function(e){console.log("支付过程失败"),o.showErrorToast("支付失败")},complete:function(e){console.log("支付过程结束")}})}}))},cancelOrder:function(e){var t=this,r=e.currentTarget.dataset.index;wx.showModal({title:"",content:"确定要取消此订单？",success:function(e){e.confirm&&t.api._post("order/cancel",{orderId:r},(function(e){0===e.errno?(wx.showToast({title:"取消订单成功"}),o.redirect("/pages/ucenter/order/order")):o.showErrorToast(e.errmsg)}))}})},refundOrder:function(e){var t=this,r=e.currentTarget.dataset.index;wx.showModal({title:"",content:"确定要取消此订单？",success:function(e){e.confirm&&t.api._post("order/refund",{orderId:r},(function(e){0===e.errno?(wx.showToast({title:"取消订单成功"}),o.redirect("/pages/ucenter/order/order")):o.showErrorToast(e.errmsg)}))}})},deleteOrder:function(e){var t=this,r=e.currentTarget.dataset.index;wx.showModal({title:"",content:"确定要删除此订单？",success:function(e){e.confirm&&t.api._post("order/delete",{orderId:r},(function(e){0===e.errno?(wx.showToast({title:"删除订单成功"}),o.redirect("/pages/ucenter/order/order")):o.showErrorToast(e.errmsg)}))}})},confirmOrder:function(e){var t=this,r=e.currentTarget.dataset.index;wx.showModal({title:"",content:"确认收货？",success:function(e){e.confirm&&t.api._post("order/confirm",{orderId:r},(function(e){0===e.errno?(wx.showToast({title:"确认收货成功！"}),o.redirect("/pages/ucenter/order/order")):o.showErrorToast(e.errmsg)}))}})},detailExpress:function(e){var t=e.currentTarget.dataset.index;wx.navigateTo({url:"/pages/ucenter/expressInfo/expressInfo?orderId="+t})}}};t.default=n},"65bc":function(e,t,r){"use strict";(function(e){r("21be");o(r("66fd"));var t=o(r("4fa1"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},8738:function(e,t,r){"use strict";var o,n=function(){var e=this,t=e.$createElement;e._self._c},a=[];r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o}))},"9b69":function(e,t,r){},a1a8:function(e,t,r){"use strict";var o=r("9b69"),n=r.n(o);n.a}},[["65bc","common/runtime","common/vendor"]]]);