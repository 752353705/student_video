(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/address/addressManage"],{"0009":function(e,t,i){"use strict";var n=i("2e3b"),s=i.n(n);s.a},1835:function(e,t,i){"use strict";(function(e){i("21be");n(i("66fd"));var t=n(i("b532"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("543d")["createPage"])},"2e3b":function(e,t,i){},"4be7":function(e,t,i){"use strict";var n,s=function(){var e=this,t=e.$createElement;e._self._c},a=[];i.d(t,"b",(function(){return s})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){return n}))},6211:function(e,t,i){"use strict";i.r(t);var n=i("8bea"),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,(function(){return n[e]}))}(a);t["default"]=s.a},"8bea":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i("20e5"),s=i("8cc1"),a={data:function(){return{address:{id:0,provinceId:0,cityId:0,areaId:0,address:"",name:"",mobile:"",isDefault:0,provinceName:"",cityName:"",areaName:""},addressId:0,openSelectRegion:!1,selectRegionList:[{id:0,name:"省份",pid:1,type:1},{id:0,name:"城市",pid:1,type:2},{id:0,name:"区县",pid:1,type:3}],regionType:1,regionList:[],selectRegionDone:!1}},onLoad:function(e){},methods:{bindinputMobile:function(e){var t=this.address;t.mobile=e.detail.value,this.address=t},bindinputName:function(e){var t=this.address;t.name=e.detail.value,this.address=t},bindinputAddress:function(e){var t=this.address;t.address=e.detail.value,this.address=t},bindIsDefault:function(){var e=this.address;e.isDefault=!e.isDefault,this.address=e},getAddressDetail:function(){var e=this;this._get("address/detail",{id:e.addressId},(function(t){0===t.errno&&t.data&&(e.address=t.data)}))},chooseRegion:function(){this.openSelectRegion=!this.openSelectRegion;var e=this.address;if(e.provinceId>0&&e.cityId>0&&e.areaId>0){var t=this.selectRegionList;t[0].id=e.provinceId,t[0].name=e.provinceName,t[0].pid=0,t[1].id=e.cityId,t[1].name=e.cityName,t[1].pid=e.provinceId,t[2].id=e.areaId,t[2].name=e.areaName,t[2].pid=e.cityId,this.selectRegionList=t,this.regionType=3,this.getRegionList(e.cityId)}else this.selectRegionList=[{id:0,name:"省份",pid:0,type:1},{id:0,name:"城市",pid:0,type:2},{id:0,name:"区县",pid:0,type:3}],this.regionType=1,this.getRegionList(0);this.setRegionDoneStatus()},getRegionList:function(e){var t=this,i=t.regionType;this._get("region/list",{pid:e},(function(e){0===e.errno&&(t.regionList=e.data.map((function(e){return i==e.type&&t.selectRegionList[i-1].id==e.id?e.selected=!0:e.selected=!1,e})))}))},setRegionDoneStatus:function(){var e=this,t=e.selectRegionList.every((function(e){return 0!=e.id}));e.selectRegionDone=t},selectRegion:function(e){var t=this,i=e.target.dataset.regionIndex;console.log("this.regionList",this.regionList,i);var n=this.regionList[i];console.log("regionItem",n);var s=n.type,a=this.selectRegionList;a[s-1]=n,3!=s?(this.selectRegionList=a,this.regionType=s+1,this.getRegionList(n.id)):this.selectRegionList=a,a.map((function(e,t){return t>s-1&&(e.id=0,e.name=1==t?"城市":"区县",e.pid=0),e})),this.selectRegionList=a,t.regionList=t.regionList.map((function(e){return t.regionType==e.type&&t.selectRegionList[t.regionType-1].id==e.id?e.selected=!0:e.selected=!1,e})),this.setRegionDoneStatus()},selectRegionType:function(e){var t=this,i=e.target.dataset.regionTypeIndex,n=t.selectRegionList;if(i+1==this.regionType||i-1>=0&&n[i-1].id<=0)return!1;this.regionType=i+1;var s=n[i];this.getRegionList(s.pid),this.setRegionDoneStatus()},doneSelectRegion:function(){if(!1===this.selectRegionDone)return!1;var e=this.address,t=this.selectRegionList;e.provinceId=t[0].id,e.cityId=t[1].id,e.areaId=t[2].id,e.provinceName=t[0].name,e.cityName=t[1].name,e.areaName=t[2].name,this.address=e,this.openSelectRegion=!1},cancelSelectRegion:function(){this.openSelectRegion=!1,this.regionType=this.regionDoneStatus?3:1},saveAddress:function(){var e=this.address;if(""==e.name)return n.showErrorToast("请输入姓名"),!1;if(""==e.mobile)return n.showErrorToast("请输入手机号码"),!1;if(0==e.areaId)return n.showErrorToast("请输入省市区"),!1;if(""==e.address)return n.showErrorToast("请输入详细地址"),!1;if(!s.isValidPhone(e.mobile))return n.showErrorToast("手机号不正确"),!1;this._post("address/save",{id:e.id,name:e.name,mobile:e.mobile,provinceId:e.provinceId,cityId:e.cityId,areaId:e.areaId,address:e.address,isDefault:e.isDefault},(function(e){if(0===e.errno){var t=getCurrentPages(),i=t[t.length-2];if(console.log(i),"pages/checkout/checkout"==i.route){i.addressId=e.data;try{wx.setStorageSync("addressId",e.data)}catch(n){}console.log("set address")}wx.navigateBack()}}))}}};t.default=a},b532:function(e,t,i){"use strict";i.r(t);var n=i("4be7"),s=i("6211");for(var a in s)"default"!==a&&function(e){i.d(t,e,(function(){return s[e]}))}(a);i("0009");var o,r=i("f0c5"),d=Object(r["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);t["default"]=d.exports}},[["1835","common/runtime","common/vendor"]]]);