(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"0371":function(e,n,t){},"1dbd":function(e,n,t){"use strict";(function(e){t("21be");o(t("66fd"));var n=o(t("a869"));function o(e){return e&&e.__esModule?e:{default:e}}e(n.default)}).call(this,t("543d")["createPage"])},"83d1":function(e,n,t){"use strict";var o,a=function(){var e=this,n=e.$createElement;e._self._c},r=[];t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return r})),t.d(n,"a",(function(){return o}))},8777:function(e,n,t){"use strict";t.r(n);var o=t("c709"),a=t.n(o);for(var r in o)"default"!==r&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=a.a},a7bf:function(e,n,t){"use strict";var o=t("0371"),a=t.n(o);a.a},a869:function(e,n,t){"use strict";t.r(n);var o=t("83d1"),a=t("8777");for(var r in a)"default"!==r&&function(e){t.d(n,e,(function(){return a[e]}))}(r);t("a7bf");var u,s=t("f0c5"),c=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],u);n["default"]=c.exports},c709:function(e,n,t){"use strict";(function(e){function t(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){var e;return e={phone:"点击获取手机号",telStatus:!1,invite:!1},t(e,"telStatus",!1),t(e,"toast",!1),t(e,"appid",""),t(e,"secret",""),t(e,"code",""),t(e,"sessionKey",""),t(e,"openId",""),t(e,"userInfo",{avatarUrl:"",city:"",country:"",gender:1,language:"",nickName:""}),t(e,"pageOption",{}),e},methods:{login:function(n){console.log("登录e",n);return e.login({provider:"weixin",success:function(n){e.getUserInfo({provider:"weixin",success:function(n){console.log("用户信息",n.userInfo),e.setStorage({key:"user_img",data:n.userInfo.avatarUrl,success:function(){console.log("存储用户头像成功")}}),e.setStorage({key:"user_name",data:n.userInfo.nickName,success:function(){console.log("存储用户名成功")}}),e.navigateBack({delta:1})}})},fail:function(){return e.showToast({title:"获取 code 失败",icon:"none"}),!1}}),!1},getSetting:function(){e.getSetting({success:function(e){console.log("用户授权",e.authSetting["scope.userInfo"]),e.authSetting["scope.userInfo"]?wx.getUserInfo({success:function(e){console.log("授权 res",e.userInfo.avatarUrl)}}):console.log("用户未进行授权")}})},wxGetUserInfo:function(){var n=this;return e.getUserInfo({provider:"weixin",success:function(t){console.log("获取用户信息 getUserInfo",t),n.userInfo=t.userInfo,e.request({url:n.apiServer+"appletsUserInfo",data:{openid:n.openId,avatarUrl:n.userInfo.avatarUrl,city:n.userInfo.city,country:n.userInfo.country,gender:n.userInfo.gender,language:n.userInfo.language,nickName:n.userInfo.nickName},method:"POST",success:function(t){if(0!=t.data.code)return e.showToast({title:t.data.msg,icon:"none"}),!1;e.showToast({title:"登录成功"}),e.setStorageSync("user_id",t.data.res.u_id),e.setStorageSync("user_nm",t.data.res.u_nickName),e.setStorageSync("user_fa",t.data.res.u_avatarUrl),e.setStorageSync("user_nu",t.data.res.u_regtime),1==n.pageOption.backtype?e.redirectTo({url:n.pageOption.backpage}):e.switchTab({url:n.pageOption.backpage})},fail:function(){e.showToast({title:"用户信息操作失败",icon:"none"})}})},fail:function(){e.showToast({title:"获取用户信息失败",icon:"none"})}}),!1}},onLoad:function(){console.log("加载")}};n.default=o}).call(this,t("543d")["default"])}},[["1dbd","common/runtime","common/vendor"]]]);