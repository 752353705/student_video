(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/playVideo/usedDetail"],{"27fb":function(o,e,t){"use strict";var n=t("54ed"),s=t.n(n);s.a},"2cf6":function(o,e,t){"use strict";t.r(e);var n=t("d1f2"),s=t("3294");for(var i in s)"default"!==i&&function(o){t.d(e,o,(function(){return s[o]}))}(i);t("27fb");var c,u=t("f0c5"),a=Object(u["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],c);e["default"]=a.exports},3294:function(o,e,t){"use strict";t.r(e);var n=t("d376"),s=t.n(n);for(var i in n)"default"!==i&&function(o){t.d(e,o,(function(){return n[o]}))}(i);e["default"]=s.a},"48ff":function(o,e,t){"use strict";(function(o){t("21be");n(t("66fd"));var e=n(t("2cf6"));function n(o){return o&&o.__esModule?o:{default:o}}o(e.default)}).call(this,t("543d")["createPage"])},"54ed":function(o,e,t){},d1f2:function(o,e,t){"use strict";var n={uIcon:function(){return t.e("node-modules/uview-ui/components/u-icon/u-icon").then(t.bind(null,"66cf"))},uniPopup:function(){return Promise.all([t.e("common/vendor"),t.e("components/uni-popup/uni-popup")]).then(t.bind(null,"f48e"))}},s=function(){var o=this,e=o.$createElement;o._self._c},i=[];t.d(e,"b",(function(){return s})),t.d(e,"c",(function(){return i})),t.d(e,"a",(function(){return n}))},d376:function(o,e,t){"use strict";(function(o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(){Promise.all([t.e("common/vendor"),t.e("components/zhangyu-qrcode-poster/zhangyu-qrcode-poster")]).then(function(){return resolve(t("081d"))}.bind(null,t)).catch(t.oe)},s=function(){t.e("components/user-comment").then(function(){return resolve(t("5541"))}.bind(null,t)).catch(t.oe)},i=function(){t.e("components/uni-popup/uni-popup-share").then(function(){return resolve(t("daf5"))}.bind(null,t)).catch(t.oe)},c=function(){Promise.all([t.e("common/vendor"),t.e("components/uni-popup/uni-popup-comments")]).then(function(){return resolve(t("0ca6"))}.bind(null,t)).catch(t.oe)},u=function(){t.e("components/like-button/like-button").then(function(){return resolve(t("8026"))}.bind(null,t)).catch(t.oe)},a={data:function(){return{clt:!1,id:"",usedItem:{price:0,avatarUrl:"/static/avatarUrl.png",goodsDescribe:""},imgArr:"",userName:"",avatarUrl:"",forwardCount:0,praseCount:0,timeStamp:0,focus:!0,commentNum:""}},components:{userComment:s,uniPopupShare:i,uniPopupComments:c,likeButton:u,QrcodePoster:n},onLoad:function(e){console.log("文章 option",e.txtId),this.id=e.usedId,this.getTxtDetail(e.usedId||7),this.userName=o.getStorageSync("user_name"),this.avatarUrl=o.getStorageSync("user_img"),o.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onShow:function(){var o=this;console.log("当前作品的浏览量 onshow"),this.api._post("secondGoods/views/".concat(o.id),{},(function(o){console.log("当前作品的浏览量",o)}))},onReady:function(){console.log("用户进行浏览 id",this.usedItem.id),this.api._post("history",{itemId:this.id,itemType:"S"},(function(o){console.log("用户进行浏览成功",o)}))},onShareAppMessage:function(o){var e=this;"button"===o.from&&console.log("按钮进行的转发",o),this.api._post("secondGoods/forward/".concat(e.usedItem.id),{},(function(o){console.log("用户进行转发成功",o),e.usedItem.forwardCount++}))},onShareTimeline:function(){"button"===res.from&&console.log("按钮进行的朋友圈转发",res)},methods:{collection:function(){var o=this;this.api._post("collection",{itemId:this.usedItem.id,itemType:"S"},(function(e){o.usedItem.collectionStatus=!o.usedItem.collectionStatus,console.log("进行收藏成功",e)}))},downImg:function(o){console.log("用户长按图片进行下载"),wx.downloadFile({url:o,success:function(o){console.log("downloadFile成功",o),wx.saveImageToPhotosAlbum({filePath:o.tempFilePath,success:function(o){console.log("saveVideoToPhotosAlbum成功",o),wx.hideLoading(),wx.showToast({title:"下载成功",icon:"none"})},fail:function(o){console.log("saveVideoToPhotosAlbum失败",o),"saveVideoToPhotosAlbum:fail auth deny"===o.errMsg&&wx.showModal({title:"提示",content:"需要您授权保存相册",showCancel:!1,success:function(o){wx.openSetting({success:function(o){o.authSetting["scope.writePhotosAlbum"]?wx.showModal({title:"提示",content:"获取权限成功,再次点击下载即可保存",showCancel:!1}):wx.showModal({title:"提示",content:"获取权限失败，将无法保存到相册哦~",showCancel:!1})}})}})}})},fail:function(o){console.log("downloadFile失败",o)}})},detailImg:function(){o.previewImage({urls:this.imgArr,indicator:"number",loop:!0})},getTxtDetail:function(o){var e=this;this.api._get("secondGoods/".concat(o),{},(function(o){console.log("获取文章的详情",o),e.usedItem=o.data,e.usedItem.price=e.usedItem.price/100,e.imgArr=o.data.images.split(",")}))},recharge:function(o,e){this.$refs.popupRecharge.open(),e()},close:function(o){this.$refs.popupShare.close()},changeCommentsNum:function(o){this.commentNum+=1},back:function(){o.navigateBack({delta:1})},goAuthor:function(){var e={avatarUrl:this.usedItem.avatarUrl,userId:this.usedItem.userId};o.navigateTo({url:"/pages/author/author?item=".concat(JSON.stringify(e))})},focusOn:function(){var e=this;this.usedItem.followed?o.showModal({content:"确认不在关注",success:function(o){o.confirm?e.api._post("follow",{followedId:e.usedItem.userId},(function(o){console.log("进行取消关注成功",o),e.usedItem.followed=!e.usedItem.followed})):o.cancel&&console.log("用户点击取消")}}):this.api._post("follow",{followedId:e.usedItem.userId},(function(o){e.usedItem.followed=!e.usedItem.followed}))},sendGift:function(){console.log("送礼物"),this.$refs.popupGifts.open()},selectgift:function(e,t){o.showModal({title:"提示",content:"您确定赠送".concat(e.item.text,"吗"),success:function(e){e.confirm?o.requestPayment({provider:"wxpay",timeStamp:String(Date.now()),nonceStr:"A1B2C3D4E5",package:"prepay_id=wx20180101abcdefg",signType:"MD5",paySign:"appid=wxd930ea5d5a258f4f&body=test&device_info=1000&mch_id=10000100&nonce_str=ibuaiVcKdpRxkhJA",success:function(o){console.log("success:"+JSON.stringify(o))},fail:function(o){console.log("fail:"+JSON.stringify(o))}}):e.cancel&&console.log("用户点击取消")}})},showPop:function(){console.log("评论窗口 ref"),this.$refs.popupComments.open()},confirmShare:function(){console.log("转发 ref"),this.$refs.popupShare.open()},sharePoster:function(){this.is_show_model=!1,this.$refs.poster.showCanvas("https://oss.zhangyubk.com/cmqrcode.jpg")},select:function(o,e){this.sharePoster()},getLike:function(){var o=this;console.log("用户进行点赞操作"),this.usedItem.praseStatus?this.api._post("secondGoods/likeSecondGoods/".concat(o.usedItem.id),{},(function(e){console.log("用户进行二手取消点赞",e),o.usedItem.praseStatus=!1,o.usedItem.praseCount--})):this.api._post("secondGoods/likeSecondGoods/".concat(o.usedItem.id),{},(function(e){console.log("用户进行二手点赞 点亮红心",e),o.usedItem.praseStatus=!0,o.usedItem.praseCount++}))}}};e.default=a}).call(this,t("543d")["default"])}},[["48ff","common/runtime","common/vendor"]]]);