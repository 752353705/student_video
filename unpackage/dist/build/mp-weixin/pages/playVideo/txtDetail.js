(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/playVideo/txtDetail"],{"62dc":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=function(){e.e("components/sin-barrage/sin-barrage").then(function(){return resolve(e("b4b6"))}.bind(null,e)).catch(e.oe)},i=function(){Promise.all([e.e("common/vendor"),e.e("components/zhangyu-qrcode-poster/zhangyu-qrcode-poster")]).then(function(){return resolve(e("081d"))}.bind(null,e)).catch(e.oe)},c=function(){e.e("components/user-comment").then(function(){return resolve(e("5541"))}.bind(null,e)).catch(e.oe)},a=function(){e.e("components/uni-popup/uni-popup-share").then(function(){return resolve(e("daf5"))}.bind(null,e)).catch(e.oe)},s=function(){Promise.all([e.e("common/vendor"),e.e("components/uni-popup/uni-popup-comments")]).then(function(){return resolve(e("0ca6"))}.bind(null,e)).catch(e.oe)},u=function(){e.e("components/uni-popup/uni-popup-gifts").then(function(){return resolve(e("0b1d"))}.bind(null,e)).catch(e.oe)},r=function(){e.e("components/uni-popup/uni-popup-recharge").then(function(){return resolve(e("ad35"))}.bind(null,e)).catch(e.oe)},l=function(){e.e("components/uni-popup/uni-popup-rank").then(function(){return resolve(e("159a"))}.bind(null,e)).catch(e.oe)},f=function(){e.e("components/like-button/like-button").then(function(){return resolve(e("8026"))}.bind(null,e)).catch(e.oe)},p={data:function(){return{sinBar:!0,list:[{}],bottom:500,left:42,color:"#FFFFFF",background:"#000000",msec:2e3,rankList:[{num:667,txt:"投票"},{num:1,txt:"排名"},{num:0,txt:"距离上一名"}],money:0,fanlist:[],clt:!1,txtItem:{title:"",content:""},imgArr:"",txtId:"",userName:"",avatarUrl:"",forwardCount:0,timeStamp:0,focus:!0,commentNum:""}},components:{sinBarrage:o,userComment:c,uniPopupShare:a,uniPopupComments:s,uniPopupGifts:u,uniPopupRecharge:r,likeButton:f,QrcodePoster:i,uniPopupRank:l},onLoad:function(n){this.txtId=n.txtId,this.getGift(n.txtId),this.getTxtDetail(this.txtId),this.userName=t.getStorageSync("user_name"),this.avatarUrl="/static/avatarUrl.png",t.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]})},onShow:function(){this.api._post("history",{itemId:this.txtId,itemType:"A"},(function(t){}))},onShareAppMessage:function(t){var n=this;return console.log("进行转发"),t.from,this.api._post("article/forward/".concat(n.txtId),{},(function(t){n.txtItem.forwardCount++})),{path:"/pages/playVideo/playVideo?videoId="+this.videoId}},onShareTimeline:function(){"button"===res.from&&console.log("按钮进行的朋友圈转发",res)},methods:{getGift:function(t){var n=this;this.api._get("gift/article/gift/".concat(t),{},(function(t){console.log("获取礼物弹幕 ===>",t),n.list=t.data}))},showSinBar:function(){this.sinBar=!1},goRank:function(){t.navigateTo({url:"/pages/rank/rank"})},rank:function(t,n){this.$refs.popupRank.open(),n()},hiddenRank:function(){this.$refs.popupRank.close()},getOtherFans:function(){var t=this;this.api._get("follow/otherUserfans",{userId:this.txtItem.userId,pageNum:1,pageSize:10},(function(n){console.log("获取其他人的粉丝列表 res ===>",n),t.fanlist=n.data.list}))},gofansLis:function(){t.navigateTo({url:"/pages/my/myFans"})},collection:function(){var t=this;this.api._post("collection",{itemId:this.txtItem.id,itemType:"A"},(function(n){t.txtItem.collectionStatus=!t.txtItem.collectionStatus}))},downImg:function(t){wx.downloadFile({url:t,success:function(t){wx.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(t){console.log("saveVideoToPhotosAlb、um成功",t),wx.hideLoading(),wx.showToast({title:"下载成功",icon:"none"})},fail:function(t){"saveVideoToPhotosAlbum:fail auth deny"===t.errMsg&&wx.showModal({title:"提示",content:"需要您授权保存相册",showCancel:!1,success:function(t){wx.openSetting({success:function(t){t.authSetting["scope.writePhotosAlbum"]?wx.showModal({title:"提示",content:"获取权限成功,再次点击下载即可保存",showCancel:!1}):wx.showModal({title:"提示",content:"获取权限失败，将无法保存到相册哦~",showCancel:!1})}})}})}})},fail:function(t){console.log("downloadFile失败",t)}})},getTxtDetail:function(t){var n=this;this.api._get("article/".concat(t),{},(function(t){console.log("获取要修改文章的详情",t),n.txtItem=t.data,n.imgArr=t.data.images.split(","),n.getOtherFans()}))},getHgold:function(){var t=this;this.api._get("user/gold",{},(function(n){t.money=n.data.goldNumber,t.$refs.popupRecharge.open()}))},recharge:function(t,n){this.getHgold(),n()},close:function(t){this.$refs.popupShare.close()},changeCommentsNum:function(t){this.commentNum+=1},back:function(){t.navigateBack({delta:1})},goAuthor:function(){var n={avatarUrl:this.txtItem.avatarUrl,userId:this.txtItem.userId};t.navigateTo({url:"/pages/author/author?item=".concat(JSON.stringify(n))})},focusOn:function(){var n=this;this.focus?this.api._post("follow",{followedId:n.txtItem.userId},(function(t){n.txtItem.followed=!n.txtItem.followed})):t.showModal({content:"确认不在关注",success:function(t){t.confirm?n.api._post("follow",{followedId:n.txtItem.userId},(function(t){__this.txtItem.followed=!n.txtItem.followed})):t.cancel}})},sendGift:function(){this.$refs.popupGifts.open()},selectgift:function(n,e){var o=this;t.showModal({title:"提示",content:"您确定赠送".concat(n.item.giftName,"吗"),success:function(e){e.confirm?o.api._post("gift/article",{articleId:o.txtItem.id,giftId:n.item.giftId},(function(n){507===n.data.errno?o.recharge():t.showToast({icon:"none",duration:2e3,title:"加油成功"})})):e.cancel&&console.log("用户点击取消")}})},showPop:function(){this.$refs.popupComments.open()},confirmShare:function(){this.$refs.popupShare.open()},sharePoster:function(){this.is_show_model=!1,this.$refs.poster.showCanvas("https://oss.zhangyubk.com/cmqrcode.jpg")},select:function(t,n){this.sharePoster()},getLike:function(t){var n=this;this.txtItem.praseStatus?this.api._post("article/likeArticle/".concat(n.txtItem.id),{},(function(t){n.txtItem.praseStatus=!1,n.txtItem.praseCount--})):this.api._post("article/likeArticle/".concat(n.txtItem.id),{},(function(t){n.txtItem.praseStatus=!0,n.txtItem.praseCount++}))}}};n.default=p}).call(this,e("543d")["default"])},"66ce":function(t,n,e){"use strict";var o={sinBarrage:function(){return e.e("components/sin-barrage/sin-barrage").then(e.bind(null,"b4b6"))},uIcon:function(){return e.e("node-modules/uview-ui/components/u-icon/u-icon").then(e.bind(null,"66cf"))},uniPopup:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-popup/uni-popup")]).then(e.bind(null,"f48e"))}},i=function(){var t=this,n=t.$createElement;t._self._c},c=[];e.d(n,"b",(function(){return i})),e.d(n,"c",(function(){return c})),e.d(n,"a",(function(){return o}))},"9b18":function(t,n,e){},a1c7:function(t,n,e){},a570:function(t,n,e){"use strict";var o=e("9b18"),i=e.n(o);i.a},b682:function(t,n,e){"use strict";(function(t){e("21be");o(e("66fd"));var n=o(e("e7c4"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},bcfa:function(t,n,e){"use strict";e.r(n);var o=e("62dc"),i=e.n(o);for(var c in o)"default"!==c&&function(t){e.d(n,t,(function(){return o[t]}))}(c);n["default"]=i.a},debf:function(t,n,e){"use strict";var o=e("a1c7"),i=e.n(o);i.a},e7c4:function(t,n,e){"use strict";e.r(n);var o=e("66ce"),i=e("bcfa");for(var c in i)"default"!==c&&function(t){e.d(n,t,(function(){return i[t]}))}(c);e("a570"),e("debf");var a,s=e("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"3c485ca2",null,!1,o["a"],a);n["default"]=u.exports}},[["b682","common/runtime","common/vendor"]]]);